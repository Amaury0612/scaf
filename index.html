<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>H√©li-Bird AS-355</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background-color: #222;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            color: white;
        }
        #game-container {
            position: relative;
            box-shadow: 0 0 50px rgba(0,0,0,0.5);
            border: 4px solid #444;
            border-radius: 8px;
            overflow: hidden;
        }
        canvas {
            display: block;
            background: linear-gradient(to bottom, #4facfe 0%, #00f2fe 100%);
        }
        #ui-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: rgba(0, 0, 0, 0.4);
            transition: opacity 0.3s;
        }
        .menu-content {
            text-align: center;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 30px;
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        h1 { margin: 0 0 10px 0; color: #fff; text-shadow: 2px 2px 4px rgba(0,0,0,0.5); }
        p { font-size: 1.2rem; }
        .btn {
            background: #f1c40f;
            color: #2c3e50;
            border: none;
            padding: 15px 30px;
            font-size: 1.2rem;
            font-weight: bold;
            border-radius: 50px;
            cursor: pointer;
            transition: transform 0.2s, background 0.2s;
            margin-top: 20px;
        }
        .btn:hover {
            background: #f39c12;
            transform: scale(1.05);
        }
        #score-display {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 3rem;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            pointer-events: none;
        }
        .hidden { display: none !important; opacity: 0; }
    </style>
</head>
<body>

    <div id="game-container">
        <canvas id="gameCanvas"></canvas>
        <div id="score-display">0</div>
        
        <div id="ui-overlay">
            <div class="menu-content" id="start-menu">
                <h1>H√©li-Bird AS-355</h1>
                <p>√âvitez les pannes et les obstacles !</p>
                <p>Appuyez sur <strong>ESPACE</strong> ou <strong>CLIQUEZ</strong></p>
                <button class="btn" onclick="startGame()">D√âCOLLAGE</button>
            </div>
            
            <div class="menu-content hidden" id="game-over-menu">
                <h1>CRASH !</h1>
                <p id="final-score">Score: 0</p>
                <p id="best-score">Meilleur: 0</p>
                <button class="btn" onclick="startGame()">R√âESSAYER</button>
            </div>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const scoreElement = document.getElementById('score-display');
        const uiOverlay = document.getElementById('ui-overlay');
        const startMenu = document.getElementById('start-menu');
        const gameOverMenu = document.getElementById('game-over-menu');
        const finalScoreText = document.getElementById('final-score');
        const bestScoreText = document.getElementById('best-score');

        // Dimensions du jeu
        const GAME_WIDTH = 400;
        const GAME_HEIGHT = 600;
        canvas.width = GAME_WIDTH;
        canvas.height = GAME_HEIGHT;

        // Param√®tres du jeu
        let gameRunning = false;
        let score = 0;
        let bestScore = localStorage.getItem('heliBestScore') || 0;

        // L'h√©licopt√®re (Bird)
        const heli = {
            x: 50,
            y: GAME_HEIGHT / 2,
            width: 45,
            height: 25,
            gravity: 0.25,
            velocity: 0,
            jump: -5.5,
            rotation: 0
        };

        // Tuyaux (Obstacles)
        let pipes = [];
        const pipeWidth = 60;
        const pipeGap = 160;
        const pipeSpeed = 2.5;
        const pipeSpacing = 220;

        function createPipe() {
            const minHeight = 50;
            const maxHeight = GAME_HEIGHT - pipeGap - minHeight;
            const height = Math.floor(Math.random() * (maxHeight - minHeight + 1)) + minHeight;
            
            pipes.push({
                x: GAME_WIDTH,
                top: height,
                bottom: GAME_HEIGHT - (height + pipeGap),
                passed: false
            });
        }

        // Contr√¥les
        window.addEventListener('keydown', (e) => {
            if (e.code === 'Space') {
                if (!gameRunning) {
                    if (gameOverMenu.classList.contains('hidden')) startGame();
                } else {
                    jump();
                }
                e.preventDefault();
            }
        });

        canvas.addEventListener('mousedown', () => {
            if (gameRunning) jump();
        });

        function jump() {
            heli.velocity = heli.jump;
        }

        function startGame() {
            // Reset
            heli.y = GAME_HEIGHT / 2;
            heli.velocity = 0;
            pipes = [];
            score = 0;
            scoreElement.innerText = score;
            gameRunning = true;
            
            uiOverlay.classList.add('hidden');
            startMenu.classList.add('hidden');
            gameOverMenu.classList.add('hidden');
            
            createPipe();
            requestAnimationFrame(gameLoop);
        }

        function gameOver() {
            gameRunning = false;
            if (score > bestScore) {
                bestScore = score;
                localStorage.setItem('heliBestScore', bestScore);
            }
            
            finalScoreText.innerText = "Score: " + score;
            bestScoreText.innerText = "Meilleur Score: " + bestScore;
            
            uiOverlay.classList.remove('hidden');
            gameOverMenu.classList.remove('hidden');
        }

        function update() {
            if (!gameRunning) return;

            // Physique de l'h√©lico
            heli.velocity += heli.gravity;
            heli.y += heli.velocity;
            
            // Rotation bas√©e sur la vitesse
            heli.rotation = Math.min(Math.PI / 4, Math.max(-Math.PI / 4, (heli.velocity * 0.1)));

            // Sortie d'√©cran
            if (heli.y + heli.height > GAME_HEIGHT || heli.y < 0) {
                gameOver();
            }

            // Gestion des tuyaux
            for (let i = pipes.length - 1; i >= 0; i--) {
                pipes[i].x -= pipeSpeed;

                // Collision
                if (
                    heli.x < pipes[i].x + pipeWidth &&
                    heli.x + heli.width > pipes[i].x &&
                    (heli.y < pipes[i].top || heli.y + heli.height > GAME_HEIGHT - pipes[i].bottom)
                ) {
                    gameOver();
                }

                // Score
                if (!pipes[i].passed && pipes[i].x + pipeWidth < heli.x) {
                    pipes[i].passed = true;
                    score++;
                    scoreElement.innerText = score;
                }

                // Supprimer les tuyaux hors √©cran
                if (pipes[i].x + pipeWidth < 0) {
                    pipes.splice(i, 1);
                }
            }

            // Nouveau tuyau
            if (pipes.length > 0 && pipes[pipes.length - 1].x < GAME_WIDTH - pipeSpacing) {
                createPipe();
            }
        }

        function draw() {
            // Fond (Ciel)
            ctx.clearRect(0, 0, GAME_WIDTH, GAME_HEIGHT);
            
            // Dessiner les tuyaux
            ctx.fillStyle = "#2ecc71";
            pipes.forEach(p => {
                // Tuyau haut
                ctx.fillRect(p.x, 0, pipeWidth, p.top);
                ctx.fillStyle = "#27ae60";
                ctx.fillRect(p.x - 2, p.top - 20, pipeWidth + 4, 20); // Rebord
                
                // Tuyau bas
                ctx.fillStyle = "#2ecc71";
                ctx.fillRect(p.x, GAME_HEIGHT - p.bottom, pipeWidth, p.bottom);
                ctx.fillStyle = "#27ae60";
                ctx.fillRect(p.x - 2, GAME_HEIGHT - p.bottom, pipeWidth + 4, 20); // Rebord
            });

            // Dessiner l'h√©licopt√®re (Emoji/SVG style)
            ctx.save();
            ctx.translate(heli.x + heli.width / 2, heli.y + heli.height / 2);
            ctx.rotate(heli.rotation);
            
            // Corps de l'h√©lico
            ctx.font = "35px serif";
            ctx.textAlign = "center";
            ctx.textBaseline = "middle";
            ctx.fillText("üöÅ", 0, 0); 
            
            ctx.restore();
        }

        function gameLoop() {
            if (!gameRunning) return;
            update();
            draw();
            requestAnimationFrame(gameLoop);
        }

        // Premier dessin
        draw();
    </script>
</body>
</html>
